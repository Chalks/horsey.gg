import{j as G,o as m,b as v,i as f,t as y,u as a,P as J,r as $,a as r,k as ne,l as se,f as x,C as re,M as ce,G as X,m as Q,D as Z,H,h as R,e as u,F as O,p as ie,q as U,S as ae,s as W,v as j,w as z,x as Y,y as D,z as M,A as de,B as ue,E as fe,I as he,J as me}from"./entry.ecd2a2cf.js";import{u as ve,c as P,a as ge}from"./achievements.db2cf872.js";import{s as ke}from"./seo.52a946ce.js";const _e={class:"flex items-end justify-between not-prose gap-4"},pe={class:"font-bold uppercase text-4xl"},ye={class:"tracking-widest text-lg font-thin text-right"},be={__name:"TitleBlock",props:{title:{type:String,required:!0}},setup(n){const e=G();return(t,o)=>(m(),v("div",_e,[f("h1",pe,y(n.title),1),f("div",ye,y(a(e).difficultyName)+" EDITION ",1)]))}},xe=["a","b","c","d","e","f","g","h"],we=["1","2","3","4","5","6","7","8"],K=()=>`${xe[Math.floor(Math.random()*8)]}${we[Math.floor(Math.random()*8)]}`,ee=["a","b","c","d","e","f","g","h"],te=["1","2","3","4","5","6","7","8"],Se=(n,e)=>{if(!n)return[];if(!e)return[];if(n!==J.bn&&n!==J.wn)return[];const t=ee.indexOf(e[0]),o=te.indexOf(e[1]);return[[t-2,o-1],[t-2,o+1],[t-1,o-2],[t-1,o+2],[t+1,o-2],[t+1,o+2],[t+2,o-1],[t+2,o+1]].filter(([s,l])=>{const c=s>=0&&s<=7,i=l>=0&&l<=7;return c&&i}).map(([s,l])=>`${ee[s]}${te[l]}`)};const Me={class:"relative"},De=f("span",null,"Click to play",-1),Be={__name:"ChessBoard",props:{start:{type:String,default:null},goalSquares:{type:Array,default:()=>[]},disableLegalMoves:{type:Number,default:0},showLegalMoves:{type:Boolean,default:!1}},emits:["start","move","invalidMove"],setup(n,{expose:e,emit:t}){const o=n;let s=null;const l=$(null),c=$(null),i=$(null),k=r(()=>Se(c.value,i.value)),p=r(()=>{const d=k.value.filter(le=>!o.goalSquares.includes(le)),_=Math.min(k.value.length-1,d.length),b=d.sort(()=>.5-Math.random()),oe=Math.min(o.disableLegalMoves,_);return b.slice(0,oe)}),h=r(()=>k.value.filter(d=>!p.value.includes(d))),g=$(!1),w=()=>{if(!s)return;c.value=["bn","wn"][Math.floor(Math.random()*2)];let d=o.start||K();for(;o.goalSquares.includes(d);)d=K();i.value=d,s.setPiece(i.value,c.value,!0)},q=()=>{s&&(s.removeMarkers(X),o.goalSquares.forEach(d=>{s.addMarker(X,d)}))},A=()=>{s&&(s.removeMarkers(Q),o.showLegalMoves&&h.value.forEach(d=>{s.addMarker(Q,d)}))},L=()=>{s&&(s.removeMarkers(Z),p.value.forEach(d=>{s.addMarker(Z,d)}))},N=d=>{if(!s)return;const _=d.target.getAttribute("data-square");if(!_)return;const b=s.getMarkers(H,_);(b==null?void 0:b.length)===0&&(s.removeMarkers(H),s.addMarker(H,_))},T=()=>{s&&s.removeMarkers(H)},I=d=>{if(!s)return;const _=d.target.getAttribute("data-square");if(h.value.includes(_)){const b=i.value;s.movePiece(b,_),i.value=_,A(),L(),t("move",{from:b,to:_})}else t("invalidMove",{from:i.value,to:_})},F=()=>{s&&(i.value=null,s.removeMarkers(),s.destroy(),l.value.replaceChildren())},C=()=>{s=new re(l.value,{assetsUrl:"/chess/",extensions:[{class:ce}]}),s.context.addEventListener("mousedown",I),s.context.addEventListener("mouseover",N),s.context.addEventListener("mouseleave",T)};ne(()=>{C()});const V=()=>{g.value=!0,t("start")};return e({ready:()=>{F(),C(),w(),q(),A(),L()},stop:()=>{g.value=!1,i.value=null,F(),C()}}),(d,_)=>(m(),v("div",Me,[f("div",{ref_key:"boardEl",ref:l},null,512),a(g)?x("",!0):(m(),v("div",{key:0,class:"cursor-pointer bg-gray-300/80 absolute inset-0 flex flex-col items-center justify-center select-none gap-2",onClick:V},[De,se(d.$slots,"default")]))]))}},$e=f("div",{class:"absolute border border-gray-700 bg-white w-[0.707106rem] h-[0.707106rem] top-1/2 right-0 rotate-45 translate-x-1/2 -translate-y-1/2"},null,-1),Ge=[$e],Ce={__name:"DifficultyRibbon",props:{disabled:{type:Boolean,default:!1},gosh:{type:Boolean,default:!1},shucks:{type:Boolean,default:!1},dang:{type:Boolean,default:!1},darn:{type:Boolean,default:!1},heck:{type:Boolean,default:!1},frick:{type:Boolean,default:!1}},emits:["click"],setup(n,{emit:e}){const t=n,o=G(),s=r(()=>t.gosh&&o.isGosh),l=r(()=>t.shucks&&o.isShucks),c=r(()=>t.dang&&o.isDang),i=r(()=>t.darn&&o.isDarn),k=r(()=>t.heck&&o.isHeck),p=r(()=>t.frick&&o.isFrick),h=r(()=>s.value||l.value||c.value||i.value||k.value||p.value),g=()=>{t.disabled||e("click")};return(w,q)=>(m(),v("div",{class:R(["select-none cursor-pointer transition-all",{"-translate-x-[0rem]":a(h),"-translate-x-[1rem]":!a(h),"hover:-translate-x-[0.5rem]":!a(h)&&!n.disabled,"cursor-not-allowed":n.disabled,"opacity-30":n.disabled}]),onClick:g},[f("div",{class:R(["border-y border-gray-700 inline-block relative text-center overflow-hidden w-8 h-4",{"bg-gosh":n.gosh,"bg-shucks":n.shucks,"bg-dang":n.dang,"bg-darn":n.darn,"bg-heck":n.heck,"bg-frick":n.frick}])},Ge,2)],2))}},Ee={class:"relative flex flex-col gap-1 overflow-clip w-8 h-full"},Re={__name:"DifficultyToggle.client",props:{gosh:{type:Boolean,default:!1},shucks:{type:Boolean,default:!1},dang:{type:Boolean,default:!1},darn:{type:Boolean,default:!1},heck:{type:Boolean,default:!1},frick:{type:Boolean,default:!1}},setup(n){const e=G(),t=()=>{e.setDifficulty(U)},o=()=>{e.setDifficulty(ae)},s=()=>{e.setDifficulty(W)},l=()=>{e.setDifficulty(j)},c=()=>{e.setDifficulty(z)},i=()=>{e.setDifficulty(Y)};return(k,p)=>{const h=Ce;return m(),v("div",Ee,[u(h,{disabled:!n.gosh,gosh:"",onClick:t},null,8,["disabled"]),u(h,{disabled:!n.shucks,shucks:"",onClick:o},null,8,["disabled"]),u(h,{disabled:!n.dang,dang:"",onClick:s},null,8,["disabled"]),u(h,{disabled:!n.darn,darn:"",onClick:l},null,8,["disabled"]),u(h,{disabled:!n.heck,heck:"",onClick:c},null,8,["disabled"]),u(h,{disabled:!n.frick,frick:"",onClick:i},null,8,["disabled"]),f("div",{class:R(["flex flex-col justify-end items-center grow bg-gradient-to-t ml-1 pb-1",{"from-gosh":a(e).isGosh,"from-shucks":a(e).isShucks,"from-dang":a(e).isDang,"from-darn":a(e).isDarn,"from-heck":a(e).isHeck,"from-frick":a(e).isFrick,"text-gosh":a(e).isGosh,"text-shucks":a(e).isShucks,"text-dang":a(e).isDang,"text-darn":a(e).isDarn,"text-heck":a(e).isHeck,"text-frick":a(e).isFrick}])},[(m(!0),v(O,null,ie(a(e).difficultyName,(g,w)=>(m(),v("div",{key:`letter-${g}-${w}`,class:"text-sm md:text-lg lg:text-xl xl:text-2xl mix-blend-color-dodge"},y(g),1))),128))],2)])}}},qe={__name:"DifficultyDescription.client",props:{gosh:{type:Boolean,default:!1},shucks:{type:Boolean,default:!1},dang:{type:Boolean,default:!1},darn:{type:Boolean,default:!1},heck:{type:Boolean,default:!1},frick:{type:Boolean,default:!1}},setup(n){const e=n,t=G(),o=r(()=>e.gosh&&t.selectedDifficulty===U),s=r(()=>e.shucks&&t.selectedDifficulty===ae),l=r(()=>e.dang&&t.selectedDifficulty===W),c=r(()=>e.darn&&t.selectedDifficulty===j),i=r(()=>e.heck&&t.selectedDifficulty===z),k=r(()=>e.frick&&t.selectedDifficulty===Y),p=r(()=>o.value||s.value||l.value||c.value||i.value||k.value);return(h,g)=>a(p)?(m(),v("div",{key:0,class:R(["text-xs font-bold text-gray-700 p-1 mb-1 last:mb-0",{"bg-gosh":a(o),"bg-shucks":a(s),"bg-dang":a(l),"bg-darn":a(c),"bg-heck":a(i),"bg-frick":a(k)}])},[se(h.$slots,"default")],2)):x("",!0)}},Ae=P(Re),Le=P(qe),Te={class:"relative pr-8"},Ie={class:"absolute top-0 right-0 bottom-0"},Fe={class:"mt-1"},He=!0,Pe=!0,Ne={__name:"BaseHorsey",setup(n){const e=$(null),t=$([]),o=G(),s=ve();let l;const c=r(()=>s.unlocked||s.mmWinShucks10),i=r(()=>s.unlocked||s.mmWinDang10),k=r(()=>s.unlocked||s.mmWinDarn10),p=r(()=>s.unlocked||s.mmWinHeck10),h=r(()=>o.selectedDifficulty===U),g=r(()=>o.selectedDifficulty===W?1:o.selectedDifficulty===j?2:o.selectedDifficulty===z?3:o.selectedDifficulty===Y?4:0),w=()=>{l={start:null,end:null,moves:0,invalidMoves:0,startPerformance:0,endPerformance:0,ms:0}},q=()=>{o.saveFile.addBaseStat(new ue({...l,difficulty:o.selectedDifficulty,date:Date.now()})),w(),e.value.stop()},A=async()=>{w(),t.value=[K()],l.end=t.value[0],l.startPerformance=performance.now(),await de(),e.value.ready()},L=({from:T,to:I})=>{l.moves===0&&(l.start=T),l.moves+=1,t.value[0]===I&&(l.endPerformance=performance.now(),l.ms=l.endPerformance-l.startPerformance,q())},N=()=>{l.invalidMoves+=1};return(T,I)=>{const F=be,C=Be,V=Ae,S=Le;return m(),v(O,null,[u(F,{title:"Move Machine",class:"mb-4"}),f("div",Te,[u(C,{ref_key:"board",ref:e,"show-legal-moves":a(h),"disable-legal-moves":a(g),"goal-squares":a(t),class:"flex-grow",onStart:A,onMove:L,onInvalidMove:N},null,8,["show-legal-moves","disable-legal-moves","goal-squares"]),f("div",Ie,[u(V,{gosh:He,shucks:Pe,dang:a(c),darn:a(i),heck:a(k),frick:a(p)},null,8,["dang","darn","heck","frick"])])]),f("div",Fe,[u(S,{gosh:""},{default:D(()=>[M(" Show legal moves ")]),_:1}),u(S,{shucks:"",dang:"",darn:"",heck:"",frick:""},{default:D(()=>[M(" Hide legal moves ")]),_:1}),u(S,{dang:"",darn:"",heck:"",frick:""},{default:D(()=>[M(" Disable one legal move ")]),_:1}),u(S,{darn:"",heck:"",frick:""},{default:D(()=>[M(" Disable one more legal move ")]),_:1}),u(S,{heck:"",frick:""},{default:D(()=>[M(" Disable one more legal move ")]),_:1}),u(S,{frick:""},{default:D(()=>[M(" Disable one more legal move ")]),_:1})])],64)}}},Ve={class:"rounded-b-lg overflow-hidden w-full origin-bottom-left not-prose"},Ke={class:"relative px-4 bg-white"},Oe=f("div",{class:"absolute top-1/2 left-0 right-0 bottom-0 bg-black"},null,-1),Ue={class:"stat text-3xl text-white mix-blend-difference translate-y-[10%] z-10"},We={class:"bg-green-900 h-4 w-full relative"},je={class:"text-white font-bold text-xs whitespace-nowrap"},ze={__name:"StatItem.client",props:{label:{type:String,required:!0},value:{type:Array,required:!0},ratio:{type:Boolean,default:!1},speed:{type:Boolean,default:!1},count:{type:Boolean,default:!1},higherIsBetter:{type:Boolean,default:!1},lowerIsBetter:{type:Boolean,default:!1}},setup(n){const e=n,t=r(()=>{if(e.ratio)return(1-e.value)*100;if(e.speed){const[s,l,c]=e.value;return(l-s)/(c-s)*100}return e.count?0:50}),o=r(()=>{if(e.ratio)return`${(100*e.value[0]).toPrecision(4)}% optimal moves`;if(e.speed){const[s,l,c]=e.value;return`${l.toFixed(2)} ms / game (${c.toFixed(2)} avg slowest, ${s.toFixed(2)} avg fastest)`}return e.count?e.value.join(" "):e.value});return(s,l)=>(m(),v("div",Ve,[f("div",Ke,[Oe,f("div",Ue,y(n.label),1)]),f("div",We,[f("div",{class:R(["absolute top-0 bottom-0 left-0 bg-green-700 flex items-center px-4 transition-all",{"rounded-r-full":a(t)>0}]),style:fe({right:`${a(t)}%`})},[f("p",je,y(a(o)),1)],6)])]))}},Ye=P(ze),Je={class:"not-prose"},Xe={key:0,class:"mb-2"},Qe={key:1,class:"mb-4"},Ze={key:2},et={key:3,class:"mb-2"},tt={key:4},st={key:5,class:"flex flex-col gap-4"},E=10,B=100,at={__name:"StatsDisplay.client",setup(n){const e=ge(),{baseStats:t}=he(e),o=r(()=>t.value.allGames>=E+10),s=r(()=>t.value.allGames>=E+10&&t.value.allGames<B),l=r(()=>t.value.allGames>=B),c=r(()=>t.value.allGames>=0),i=r(()=>t.value.allGames>=0&&t.value.allGames<E),k=r(()=>t.value.allGames>=E);return(p,h)=>{const g=Ye;return m(),v("div",Je,[a(o)?(m(),v("h3",Xe,"Rolling "+y(B)+" Statistics")):x("",!0),a(s)?(m(),v("div",Qe," Play at least "+y(B-a(t).allGames)+" more games to see your rolling "+y(B)+" statistics! These statistics are based on your "+y(B)+" most recent games only. ",1)):x("",!0),a(l)?(m(),v("div",Ze," rolling stats coming soon ")):x("",!0),a(c)?(m(),v("h3",et,"Lifetime Statistics")):x("",!0),a(i)?(m(),v("div",tt," Play at least "+y(E-a(t).allGames)+" more games to see statistics! ",1)):x("",!0),a(k)?(m(),v("div",st,[u(g,{label:"GAMES",value:["You have played",a(t).allGames,"games. Wow."],count:"","lower-is-better":""},null,8,["value"]),u(g,{label:"SPEED",value:[a(t).allAverageFastestTimePerMove,a(t).allAverageTimePerMove,a(t).allAverageSlowestTimePerMove],speed:"","lower-is-better":""},null,8,["value"]),u(g,{label:"ACCURACY",value:[a(t).allBestMoveRatio],ratio:"","higher-is-better":""},null,8,["value"])])):x("",!0)])}}},ot=P(at),lt={class:"mt-4"},nt=me("<p>The Base Knight game trains you on the basic knight moves.</p><h3>fork knight</h3><p>coming soon - find the square that forks two pieces</p><h3>defense knight</h3><p>coming soon - find a square that defends a piece</p><h3>defended knight</h3><p>coming soon - find a square that defends the knight</p><h3>dodge knight</h3><p>coming soon - get to a square while dodging all no-no squares</p><h3>predict knight</h3><p>coming soon - find a square X moves away from the knight</p>",11),ut={__name:"index",setup(n){ke({pageTitle:"horsey.gg"});const e=G(),t=()=>{e.saveFile.resetBaseStats()};return(o,s)=>{const l=Ne,c=ot;return m(),v(O,null,[u(l),f("div",lt,[u(c)]),f("p",null,[M(" Reset stats, test mode only: "),f("button",{type:"button",onClick:t},"Reset stats")]),nt],64)}}};export{ut as default};
