import{a as se,u as re,c as T}from"./achievement.8ceb0436.js";import{G as w,S as A,D as S,j as D,H as $,k as G,o as h,b as m,e as v,t as _,h as b,u as t,P as X,r as q,a as i,l as ue,m as ne,C as de,M as fe,p as Q,q as Z,s as ee,v as K,f as u,F as z,w as he,i as W,x as oe,y as B,z as C,A as me,B as ve,E as ge,I as ye,J as _e}from"./entry.6246dd54.js";import{_ as ke}from"./DifficultyRibbon.53412931.js";import{s as pe}from"./seo.7e5332d1.js";const le=s=>{switch(s){case G:return"FRICK";case $:return"HECK";case D:return"DARN";case S:return"DANG";case A:return"SHUCKS";case w:default:return"GOSH"}},be={class:"flex items-end justify-between not-prose gap-4"},Me={class:"font-bold uppercase text-xl md:text-4xl"},xe={key:0,class:"text-xs"},we={class:"tracking-widest text-sm md:text-lg font-thin text-right"},Se={__name:"TitleBlock.client",props:{difficulty:{type:Number,required:!0},title:{type:String,required:!0},description:{type:String,default:null}},setup(s){return(a,n)=>(h(),m("div",be,[v("div",null,[v("h1",Me,_(s.title),1),s.description?(h(),m("p",xe,_(s.description),1)):b("",!0)]),v("div",we,_(t(le)(s.difficulty))+" EDITION ",1)]))}},De=["a","b","c","d","e","f","g","h"],$e=["1","2","3","4","5","6","7","8"],j=()=>`${De[Math.floor(Math.random()*8)]}${$e[Math.floor(Math.random()*8)]}`,te=["a","b","c","d","e","f","g","h"],ae=["1","2","3","4","5","6","7","8"],Ge=(s,a)=>{if(!s)return[];if(!a)return[];if(s!==X.bn&&s!==X.wn)return[];const n=te.indexOf(a[0]),c=ae.indexOf(a[1]);return[[n-2,c-1],[n-2,c+1],[n-1,c-2],[n-1,c+2],[n+1,c-2],[n+1,c+2],[n+2,c-1],[n+2,c+1]].filter(([e,o])=>{const l=e>=0&&e<=7,d=o>=0&&o<=7;return l&&d}).map(([e,o])=>`${te[e]}${ae[o]}`)};const Be={class:"relative"},Ce=v("span",null,"Click to play",-1),Ee={__name:"ChessBoard",props:{start:{type:String,default:null},goalSquares:{type:Array,default:()=>[]},disableLegalMoves:{type:Number,default:0},showLegalMoves:{type:Boolean,default:!1}},emits:["start","move","invalidMove"],setup(s,{expose:a,emit:n}){const c=s;let e=null;const o=q(null),l=q(null),d=q(null),k=i(()=>Ge(l.value,d.value)),M=i(()=>{const r=k.value.filter(ie=>!c.goalSquares.includes(ie)),f=Math.min(k.value.length-1,r.length),x=r.sort(()=>.5-Math.random()),ce=Math.min(c.disableLegalMoves,f);return x.slice(0,ce)}),g=i(()=>k.value.filter(r=>!M.value.includes(r))),y=q(!1),R=()=>{if(!e)return;l.value=["bn","wn"][Math.floor(Math.random()*2)];let r=c.start||j();for(;c.goalSquares.includes(r);)r=j();d.value=r,e.setPiece(d.value,l.value,!0)},N=()=>{e&&(e.removeMarkers(Q),c.goalSquares.forEach(r=>{e.addMarker(Q,r)}))},I=()=>{e&&(e.removeMarkers(Z),c.showLegalMoves&&g.value.forEach(r=>{e.addMarker(Z,r)}))},P=()=>{e&&(e.removeMarkers(ee),M.value.forEach(r=>{e.addMarker(ee,r)}))},O=r=>{if(!e)return;const f=r.target.getAttribute("data-square");if(!f)return;const x=e.getMarkers(K,f);(x==null?void 0:x.length)===0&&(e.removeMarkers(K),e.addMarker(K,f))},V=()=>{e&&e.removeMarkers(K)},U=r=>{if(!e)return;const f=r.target.getAttribute("data-square");if(g.value.includes(f)){const x=d.value;e.movePiece(x,f),d.value=f,I(),P(),n("move",{from:x,to:f})}else n("invalidMove",{from:d.value,to:f})},F=()=>{e&&(d.value=null,e.removeMarkers(),e.destroy(),o.value.replaceChildren())},p=()=>{e=new de(o.value,{assetsUrl:"/chess/",extensions:[{class:fe}]}),e.context.addEventListener("mousedown",U),e.context.addEventListener("mouseover",O),e.context.addEventListener("mouseleave",V)};ue(()=>{p()});const H=()=>{y.value=!0,n("start")};return a({ready:()=>{F(),p(),R(),N(),I(),P()},stop:()=>{y.value=!1,d.value=null,F(),p()}}),(r,f)=>(h(),m("div",Be,[v("div",{ref_key:"boardEl",ref:o},null,512),t(y)?b("",!0):(h(),m("div",{key:0,class:"cursor-pointer bg-gray-300/80 absolute inset-0 flex flex-col items-center justify-center select-none gap-2",onClick:H},[Ce,ne(r.$slots,"default")]))]))}},Ae={class:"relative flex flex-col gap-1.5 overflow-clip w-8 h-full"},qe={__name:"DifficultyToggle.client",props:{difficulty:{type:Number,default:w},canGosh:{type:Boolean,default:!1},canShucks:{type:Boolean,default:!1},canDang:{type:Boolean,default:!1},canDarn:{type:Boolean,default:!1},canHeck:{type:Boolean,default:!1},canFrick:{type:Boolean,default:!1}},emits:["change"],setup(s,{emit:a}){const n=()=>{a("change",w)},c=()=>{a("change",A)},e=()=>{a("change",S)},o=()=>{a("change",D)},l=()=>{a("change",$)},d=()=>{a("change",G)};return(k,M)=>{const g=ke;return h(),m("div",Ae,[u(g,{on:s.difficulty===t(w),disabled:!s.canGosh,gosh:"",onClick:n},null,8,["on","disabled"]),u(g,{on:s.difficulty===t(A),disabled:!s.canShucks,shucks:"",onClick:c},null,8,["on","disabled"]),u(g,{on:s.difficulty===t(S),disabled:!s.canDang,dang:"",onClick:e},null,8,["on","disabled"]),u(g,{on:s.difficulty===t(D),disabled:!s.canDarn,darn:"",onClick:o},null,8,["on","disabled"]),u(g,{on:s.difficulty===t($),disabled:!s.canHeck,heck:"",onClick:l},null,8,["on","disabled"]),u(g,{on:s.difficulty===t(G),disabled:!s.canFrick,frick:"",onClick:d},null,8,["on","disabled"]),v("div",{class:W(["flex flex-col justify-end items-center grow bg-gradient-to-t ml-1 pb-1",{"from-gosh":s.difficulty===t(w),"from-shucks":s.difficulty===t(A),"from-dang":s.difficulty===t(S),"from-darn":s.difficulty===t(D),"from-heck":s.difficulty===t($),"from-frick":s.difficulty===t(G),"text-gosh":s.difficulty===t(w),"text-shucks":s.difficulty===t(A),"text-dang":s.difficulty===t(S),"text-darn":s.difficulty===t(D),"text-heck":s.difficulty===t($),"text-frick":s.difficulty===t(G)}])},[(h(!0),m(z,null,he(t(le)(s.difficulty),(y,R)=>(h(),m("div",{key:`letter-${y}-${R}`,class:"text-sm md:text-lg lg:text-xl xl:text-2xl mix-blend-color-dodge"},_(y),1))),128))],2)])}}},Re={__name:"DifficultyDescription.client",props:{difficulty:{type:Number,required:!0},gosh:{type:Boolean,default:!1},shucks:{type:Boolean,default:!1},dang:{type:Boolean,default:!1},darn:{type:Boolean,default:!1},heck:{type:Boolean,default:!1},frick:{type:Boolean,default:!1}},setup(s){const a=s,n=i(()=>a.gosh&&a.difficulty===w),c=i(()=>a.shucks&&a.difficulty===A),e=i(()=>a.dang&&a.difficulty===S),o=i(()=>a.darn&&a.difficulty===D),l=i(()=>a.heck&&a.difficulty===$),d=i(()=>a.frick&&a.difficulty===G),k=i(()=>n.value||c.value||e.value||o.value||l.value||d.value);return(M,g)=>t(k)?(h(),m("div",{key:0,class:W(["text-xs font-bold text-gray-700 p-1 mb-1 last:mb-0",{"bg-gosh":t(n),"bg-shucks":t(c),"bg-dang":t(e),"bg-darn":t(o),"bg-heck":t(l),"bg-frick":t(d)}])},[ne(M.$slots,"default")],2)):b("",!0)}},Ie=T(Se),Le=T(qe),Te=T(Re),Ne={class:"relative pr-8"},Pe={class:"absolute top-0 right-0 bottom-0"},Fe={class:"mt-1"},He=!0,Ke=!0,Oe={__name:"MoveMachine",setup(s){const a=q(null),n=q([]),c=oe(),e=se(),o=re();let l;const d=i(()=>o.unlocked||o.mmAchievements.shucks10),k=i(()=>o.unlocked||o.mmAchievements.dang10),M=i(()=>o.unlocked||o.mmAchievements.darn10),g=i(()=>o.unlocked||o.mmAchievements.heck10),y=i(()=>e.currentDifficulty===w),R=i(()=>e.currentDifficulty===S?1:e.currentDifficulty===D?2:e.currentDifficulty===$?3:e.currentDifficulty===G?4:0),N=()=>{l={start:null,end:null,moves:0,invalidMoves:0,startPerformance:0,endPerformance:0,ms:0}},I=()=>{N(),a.value.stop()},P=()=>{c.saveFile.addMoveMachineStat(new ve({...l,difficulty:e.currentDifficulty,date:Date.now()})),I()},O=async()=>{N(),n.value=[j()],l.end=n.value[0],l.startPerformance=performance.now(),await me(),a.value.ready()},V=({from:p,to:H})=>{l.moves===0&&(l.start=p),l.moves+=1,n.value[0]===H&&(l.endPerformance=performance.now(),l.ms=l.endPerformance-l.startPerformance,P())},U=()=>{l.invalidMoves+=1},F=p=>{p!==e.currentDifficulty&&I(),e.setDifficulty(p)};return(p,H)=>{const Y=Ie,J=Ee,r=Le,f=Te;return h(),m(z,null,[u(Y,{difficulty:t(e).currentDifficulty,title:"Move Machine",class:"mb-4",description:"Move the horsey to the indicated square"},null,8,["difficulty"]),v("div",Ne,[u(J,{ref_key:"board",ref:a,"show-legal-moves":t(y),"disable-legal-moves":t(R),"goal-squares":t(n),class:"flex-grow border border-gray-700",onStart:O,onMove:V,onInvalidMove:U},null,8,["show-legal-moves","disable-legal-moves","goal-squares"]),v("div",Pe,[u(r,{difficulty:t(e).currentDifficulty,"can-gosh":He,"can-shucks":Ke,"can-dang":t(d),"can-darn":t(k),"can-heck":t(M),"can-frick":t(g),onChange:F},null,8,["difficulty","can-dang","can-darn","can-heck","can-frick"])])]),v("div",Fe,[u(f,{difficulty:t(e).currentDifficulty,gosh:""},{default:B(()=>[C(" Show legal moves ")]),_:1},8,["difficulty"]),u(f,{difficulty:t(e).currentDifficulty,shucks:"",dang:"",darn:"",heck:"",frick:""},{default:B(()=>[C(" Hide legal moves ")]),_:1},8,["difficulty"]),u(f,{difficulty:t(e).currentDifficulty,dang:"",darn:"",heck:"",frick:""},{default:B(()=>[C(" Disable one legal move ")]),_:1},8,["difficulty"]),u(f,{difficulty:t(e).currentDifficulty,darn:"",heck:"",frick:""},{default:B(()=>[C(" Disable one more legal move ")]),_:1},8,["difficulty"]),u(f,{difficulty:t(e).currentDifficulty,heck:"",frick:""},{default:B(()=>[C(" Disable one more legal move ")]),_:1},8,["difficulty"]),u(f,{difficulty:t(e).currentDifficulty,frick:""},{default:B(()=>[C(" Disable one more legal move ")]),_:1},8,["difficulty"])])],64)}}},Ve={class:"rounded-b-lg overflow-hidden w-full origin-bottom-left not-prose"},Ue={class:"relative px-4 bg-white"},je=v("div",{class:"absolute top-1/2 left-0 right-0 bottom-0 bg-black"},null,-1),ze={class:"stat text-3xl text-white mix-blend-difference translate-y-[10%] z-10"},We={class:"bg-green-900 h-4 w-full relative"},Ye={class:"text-white font-bold text-xs whitespace-nowrap"},Je={__name:"StatItem.client",props:{label:{type:String,required:!0},value:{type:Array,required:!0},ratio:{type:Boolean,default:!1},gameSpeed:{type:Boolean,default:!1},moveSpeed:{type:Boolean,default:!1},count:{type:Boolean,default:!1},higherIsBetter:{type:Boolean,default:!1},lowerIsBetter:{type:Boolean,default:!1}},setup(s){const a=s,n=i(()=>{if(a.ratio)return(1-a.value)*100;if(a.gameSpeed)return 0;if(a.moveSpeed){const[e,o,l]=a.value;return(o-e)/(l-e)*100}return a.count?0:50}),c=i(()=>{if(a.ratio)return`${(100*a.value[0]).toPrecision(4)}% optimal moves`;if(a.gameSpeed)return`${a.value.toFixed(2)} ms / game`;if(a.moveSpeed){const[e,o,l]=a.value;return`${o.toFixed(2)} ms / move (${l.toFixed(2)} avg slowest, ${e.toFixed(2)} avg fastest)`}return a.count?a.value.join(" "):a.value});return(e,o)=>(h(),m("div",Ve,[v("div",Ue,[je,v("div",ze,_(s.label),1)]),v("div",We,[v("div",{class:W(["absolute top-0 bottom-0 left-0 bg-green-700 flex items-center px-4 transition-all",{"rounded-r-full":t(n)>0}]),style:ge({right:`${t(n)}%`})},[v("p",Ye,_(t(c)),1)],6)])]))}},Xe=T(Je),Qe={class:"not-prose"},Ze={key:0,class:"mb-2"},et={key:1,class:"mb-4"},tt={key:2},at={key:3,class:"mb-2"},st={key:4},nt={key:5,class:"flex flex-col gap-4"},L=10,E=100,ot={__name:"StatsDisplay.client",setup(s){const a=se(),{stats:n}=ye(a),c=i(()=>n.value.allGames>=L+10),e=i(()=>n.value.allGames>=L+10&&n.value.allGames<E),o=i(()=>n.value.allGames>=E),l=i(()=>n.value.allGames>=0),d=i(()=>n.value.allGames>=0&&n.value.allGames<L),k=i(()=>n.value.allGames>=L);return(M,g)=>{const y=Xe;return h(),m("div",Qe,[t(c)?(h(),m("h3",Ze,"Rolling "+_(E)+" Statistics")):b("",!0),t(e)?(h(),m("div",et," Play at least "+_(E-t(n).allGames)+" more games to see your rolling "+_(E)+" statistics! These statistics are based on your "+_(E)+" most recent games only. ",1)):b("",!0),t(o)?(h(),m("div",tt," rolling stats coming soon ")):b("",!0),t(l)?(h(),m("h3",at,"Lifetime Statistics")):b("",!0),t(d)?(h(),m("div",st," Play at least "+_(L-t(n).allGames)+" more games to see statistics! ",1)):b("",!0),t(k)?(h(),m("div",nt,[u(y,{label:"GAMES",value:["You have played",t(n).allGames,"games. Wow."],count:"","lower-is-better":""},null,8,["value"]),u(y,{label:"MOVE SPEED",value:[t(n).allAverageFastestTimePerMove,t(n).allAverageTimePerMove,t(n).allAverageSlowestTimePerMove],"move-speed":"","lower-is-better":""},null,8,["value"]),u(y,{label:"GAME SPEED",value:t(n).allAverageTimePerGame,"game-speed":"","lower-is-better":""},null,8,["value"]),u(y,{label:"ACCURACY",value:[t(n).allBestMoveRatio],ratio:"","higher-is-better":""},null,8,["value"])])):b("",!0)])}}},lt=T(ot),ct={class:"mt-4"},it=v("p",null,` I'm actively developing horsey.gg, so sometimes stats get into a weird state while I finalize the data structures. Click "Reset stats" to reset yours if you're having an issue. `,-1),rt=_e('<h3>fork knight</h3><p>coming soon - find the square that forks two pieces</p><h3>defense knight</h3><p>coming soon - find a square that defends a piece</p><h3>defended knight</h3><p>coming soon - find a square that defends the knight</p><h3>dodge knight</h3><p>coming soon - get to a square while dodging all no-no squares</p><h3>predict knight</h3><p>coming soon - find a square X moves away from the knight</p><h3>Have an idea?</h3><a href="https://github.com/Chalks/horsey.gg/issues/new?labels=idea">Let me know on Github</a>',12),mt={__name:"index",setup(s){pe({pageTitle:"horsey.gg"});const a=oe(),n=()=>{a.saveFile.reset()};return(c,e)=>{const o=Oe,l=lt;return h(),m(z,null,[u(o),v("div",ct,[u(l)]),it,v("button",{type:"button",onClick:n},"Reset stats"),rt],64)}}};export{mt as default};
