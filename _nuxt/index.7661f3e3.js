import{a as se,u as re,c as N}from"./achievements.9a37fc4c.js";import{G as w,S as q,D,k as $,H as B,l as G,o as h,b as m,e as v,t as _,h as b,u as t,P as X,r as R,a as i,m as ue,q as ne,C as de,M as fe,s as Q,v as Z,w as ee,x as K,f as u,F as j,y as he,z,A as oe,B as C,E as S,I as me,J as ve,K as ge,L as ye,i as _e}from"./entry.bc4c838d.js";import{_ as ke}from"./DifficultyRibbon.38a02803.js";import{s as pe}from"./seo.5da8f177.js";const le=s=>{switch(s){case G:return"FRICK";case B:return"HECK";case $:return"DARN";case D:return"DANG";case q:return"SHUCKS";case w:default:return"GOSH"}},be={class:"flex items-end justify-between not-prose gap-4"},Me={class:"font-bold uppercase text-4xl"},xe={key:0,class:"text-xs"},we={class:"tracking-widest text-lg font-thin text-right"},Se={__name:"TitleBlock.client",props:{difficulty:{type:Number,required:!0},title:{type:String,required:!0},description:{type:String,default:null}},setup(s){return(a,n)=>(h(),m("div",be,[v("div",null,[v("h1",Me,_(s.title),1),s.description?(h(),m("p",xe,_(s.description),1)):b("",!0)]),v("div",we,_(t(le)(s.difficulty))+" EDITION ",1)]))}},De=["a","b","c","d","e","f","g","h"],$e=["1","2","3","4","5","6","7","8"],W=()=>`${De[Math.floor(Math.random()*8)]}${$e[Math.floor(Math.random()*8)]}`,te=["a","b","c","d","e","f","g","h"],ae=["1","2","3","4","5","6","7","8"],Be=(s,a)=>{if(!s)return[];if(!a)return[];if(s!==X.bn&&s!==X.wn)return[];const n=te.indexOf(a[0]),c=ae.indexOf(a[1]);return[[n-2,c-1],[n-2,c+1],[n-1,c-2],[n-1,c+2],[n+1,c-2],[n+1,c+2],[n+2,c-1],[n+2,c+1]].filter(([e,o])=>{const l=e>=0&&e<=7,d=o>=0&&o<=7;return l&&d}).map(([e,o])=>`${te[e]}${ae[o]}`)};const Ge={class:"relative"},Ce=v("span",null,"Click to play",-1),Ee={__name:"ChessBoard",props:{start:{type:String,default:null},goalSquares:{type:Array,default:()=>[]},disableLegalMoves:{type:Number,default:0},showLegalMoves:{type:Boolean,default:!1}},emits:["start","move","invalidMove"],setup(s,{expose:a,emit:n}){const c=s;let e=null;const o=R(null),l=R(null),d=R(null),k=i(()=>Be(l.value,d.value)),M=i(()=>{const r=k.value.filter(ie=>!c.goalSquares.includes(ie)),f=Math.min(k.value.length-1,r.length),x=r.sort(()=>.5-Math.random()),ce=Math.min(c.disableLegalMoves,f);return x.slice(0,ce)}),g=i(()=>k.value.filter(r=>!M.value.includes(r))),y=R(!1),A=()=>{if(!e)return;l.value=["bn","wn"][Math.floor(Math.random()*2)];let r=c.start||W();for(;c.goalSquares.includes(r);)r=W();d.value=r,e.setPiece(d.value,l.value,!0)},T=()=>{e&&(e.removeMarkers(Q),c.goalSquares.forEach(r=>{e.addMarker(Q,r)}))},L=()=>{e&&(e.removeMarkers(Z),c.showLegalMoves&&g.value.forEach(r=>{e.addMarker(Z,r)}))},P=()=>{e&&(e.removeMarkers(ee),M.value.forEach(r=>{e.addMarker(ee,r)}))},O=r=>{if(!e)return;const f=r.target.getAttribute("data-square");if(!f)return;const x=e.getMarkers(K,f);(x==null?void 0:x.length)===0&&(e.removeMarkers(K),e.addMarker(K,f))},V=()=>{e&&e.removeMarkers(K)},U=r=>{if(!e)return;const f=r.target.getAttribute("data-square");if(g.value.includes(f)){const x=d.value;e.movePiece(x,f),d.value=f,L(),P(),n("move",{from:x,to:f})}else n("invalidMove",{from:d.value,to:f})},F=()=>{e&&(d.value=null,e.removeMarkers(),e.destroy(),o.value.replaceChildren())},p=()=>{e=new de(o.value,{assetsUrl:"/chess/",extensions:[{class:fe}]}),e.context.addEventListener("mousedown",U),e.context.addEventListener("mouseover",O),e.context.addEventListener("mouseleave",V)};ue(()=>{p()});const H=()=>{y.value=!0,n("start")};return a({ready:()=>{F(),p(),A(),T(),L(),P()},stop:()=>{y.value=!1,d.value=null,F(),p()}}),(r,f)=>(h(),m("div",Ge,[v("div",{ref_key:"boardEl",ref:o},null,512),t(y)?b("",!0):(h(),m("div",{key:0,class:"cursor-pointer bg-gray-300/80 absolute inset-0 flex flex-col items-center justify-center select-none gap-2",onClick:H},[Ce,ne(r.$slots,"default")]))]))}},qe={class:"relative flex flex-col gap-1.5 overflow-clip w-8 h-full"},Re={__name:"DifficultyToggle.client",props:{difficulty:{type:Number,default:w},canGosh:{type:Boolean,default:!1},canShucks:{type:Boolean,default:!1},canDang:{type:Boolean,default:!1},canDarn:{type:Boolean,default:!1},canHeck:{type:Boolean,default:!1},canFrick:{type:Boolean,default:!1}},emits:["change"],setup(s,{emit:a}){const n=()=>{a("change",w)},c=()=>{a("change",q)},e=()=>{a("change",D)},o=()=>{a("change",$)},l=()=>{a("change",B)},d=()=>{a("change",G)};return(k,M)=>{const g=ke;return h(),m("div",qe,[u(g,{on:s.difficulty===t(w),disabled:!s.canGosh,gosh:"",onClick:n},null,8,["on","disabled"]),u(g,{on:s.difficulty===t(q),disabled:!s.canShucks,shucks:"",onClick:c},null,8,["on","disabled"]),u(g,{on:s.difficulty===t(D),disabled:!s.canDang,dang:"",onClick:e},null,8,["on","disabled"]),u(g,{on:s.difficulty===t($),disabled:!s.canDarn,darn:"",onClick:o},null,8,["on","disabled"]),u(g,{on:s.difficulty===t(B),disabled:!s.canHeck,heck:"",onClick:l},null,8,["on","disabled"]),u(g,{on:s.difficulty===t(G),disabled:!s.canFrick,frick:"",onClick:d},null,8,["on","disabled"]),v("div",{class:z(["flex flex-col justify-end items-center grow bg-gradient-to-t ml-1 pb-1",{"from-gosh":s.difficulty===t(w),"from-shucks":s.difficulty===t(q),"from-dang":s.difficulty===t(D),"from-darn":s.difficulty===t($),"from-heck":s.difficulty===t(B),"from-frick":s.difficulty===t(G),"text-gosh":s.difficulty===t(w),"text-shucks":s.difficulty===t(q),"text-dang":s.difficulty===t(D),"text-darn":s.difficulty===t($),"text-heck":s.difficulty===t(B),"text-frick":s.difficulty===t(G)}])},[(h(!0),m(j,null,he(t(le)(s.difficulty),(y,A)=>(h(),m("div",{key:`letter-${y}-${A}`,class:"text-sm md:text-lg lg:text-xl xl:text-2xl mix-blend-color-dodge"},_(y),1))),128))],2)])}}},Ae={__name:"DifficultyDescription.client",props:{difficulty:{type:Number,required:!0},gosh:{type:Boolean,default:!1},shucks:{type:Boolean,default:!1},dang:{type:Boolean,default:!1},darn:{type:Boolean,default:!1},heck:{type:Boolean,default:!1},frick:{type:Boolean,default:!1}},setup(s){const a=s,n=i(()=>a.gosh&&a.difficulty===w),c=i(()=>a.shucks&&a.difficulty===q),e=i(()=>a.dang&&a.difficulty===D),o=i(()=>a.darn&&a.difficulty===$),l=i(()=>a.heck&&a.difficulty===B),d=i(()=>a.frick&&a.difficulty===G),k=i(()=>n.value||c.value||e.value||o.value||l.value||d.value);return(M,g)=>t(k)?(h(),m("div",{key:0,class:z(["text-xs font-bold text-gray-700 p-1 mb-1 last:mb-0",{"bg-gosh":t(n),"bg-shucks":t(c),"bg-dang":t(e),"bg-darn":t(o),"bg-heck":t(l),"bg-frick":t(d)}])},[ne(M.$slots,"default")],2)):b("",!0)}},Le=N(Se),Ie=N(Re),Ne=N(Ae),Te={class:"relative pr-8"},Pe={class:"absolute top-0 right-0 bottom-0"},Fe={class:"mt-1"},He=!0,Ke=!0,Oe={__name:"MoveMachine",setup(s){const a=R(null),n=R([]),c=oe(),e=se(),o=re();let l;const d=i(()=>o.unlocked||o.mmWinShucks10),k=i(()=>o.unlocked||o.mmWinDang10),M=i(()=>o.unlocked||o.mmWinDarn10),g=i(()=>o.unlocked||o.mmWinHeck10),y=i(()=>e.currentDifficulty===w),A=i(()=>e.currentDifficulty===D?1:e.currentDifficulty===$?2:e.currentDifficulty===B?3:e.currentDifficulty===G?4:0),T=()=>{l={start:null,end:null,moves:0,invalidMoves:0,startPerformance:0,endPerformance:0,ms:0}},L=()=>{T(),a.value.stop()},P=()=>{c.saveFile.addMoveMachineStat(new ve({...l,difficulty:e.currentDifficulty,date:Date.now()})),L()},O=async()=>{T(),n.value=[W()],l.end=n.value[0],l.startPerformance=performance.now(),await me(),a.value.ready()},V=({from:p,to:H})=>{l.moves===0&&(l.start=p),l.moves+=1,n.value[0]===H&&(l.endPerformance=performance.now(),l.ms=l.endPerformance-l.startPerformance,P())},U=()=>{l.invalidMoves+=1},F=p=>{p!==e.currentDifficulty&&L(),e.setDifficulty(p)};return(p,H)=>{const Y=Le,J=Ee,r=Ie,f=Ne;return h(),m(j,null,[u(Y,{difficulty:t(e).currentDifficulty,title:"Move Machine",class:"mb-4",description:"Move the horsey to the indicated square"},null,8,["difficulty"]),v("div",Te,[u(J,{ref_key:"board",ref:a,"show-legal-moves":t(y),"disable-legal-moves":t(A),"goal-squares":t(n),class:"flex-grow border border-gray-700",onStart:O,onMove:V,onInvalidMove:U},null,8,["show-legal-moves","disable-legal-moves","goal-squares"]),v("div",Pe,[u(r,{difficulty:t(e).currentDifficulty,"can-gosh":He,"can-shucks":Ke,"can-dang":t(d),"can-darn":t(k),"can-heck":t(M),"can-frick":t(g),onChange:F},null,8,["difficulty","can-dang","can-darn","can-heck","can-frick"])])]),v("div",Fe,[u(f,{difficulty:t(e).currentDifficulty,gosh:""},{default:C(()=>[S(" Show legal moves ")]),_:1},8,["difficulty"]),u(f,{difficulty:t(e).currentDifficulty,shucks:"",dang:"",darn:"",heck:"",frick:""},{default:C(()=>[S(" Hide legal moves ")]),_:1},8,["difficulty"]),u(f,{difficulty:t(e).currentDifficulty,dang:"",darn:"",heck:"",frick:""},{default:C(()=>[S(" Disable one legal move ")]),_:1},8,["difficulty"]),u(f,{difficulty:t(e).currentDifficulty,darn:"",heck:"",frick:""},{default:C(()=>[S(" Disable one more legal move ")]),_:1},8,["difficulty"]),u(f,{difficulty:t(e).currentDifficulty,heck:"",frick:""},{default:C(()=>[S(" Disable one more legal move ")]),_:1},8,["difficulty"]),u(f,{difficulty:t(e).currentDifficulty,frick:""},{default:C(()=>[S(" Disable one more legal move ")]),_:1},8,["difficulty"])])],64)}}},Ve={class:"rounded-b-lg overflow-hidden w-full origin-bottom-left not-prose"},Ue={class:"relative px-4 bg-white"},We=v("div",{class:"absolute top-1/2 left-0 right-0 bottom-0 bg-black"},null,-1),je={class:"stat text-3xl text-white mix-blend-difference translate-y-[10%] z-10"},ze={class:"bg-green-900 h-4 w-full relative"},Ye={class:"text-white font-bold text-xs whitespace-nowrap"},Je={__name:"StatItem.client",props:{label:{type:String,required:!0},value:{type:Array,required:!0},ratio:{type:Boolean,default:!1},speed:{type:Boolean,default:!1},count:{type:Boolean,default:!1},higherIsBetter:{type:Boolean,default:!1},lowerIsBetter:{type:Boolean,default:!1}},setup(s){const a=s,n=i(()=>{if(a.ratio)return(1-a.value)*100;if(a.speed){const[e,o,l]=a.value;return(o-e)/(l-e)*100}return a.count?0:50}),c=i(()=>{if(a.ratio)return`${(100*a.value[0]).toPrecision(4)}% optimal moves`;if(a.speed){const[e,o,l]=a.value;return`${o.toFixed(2)} ms / game (${l.toFixed(2)} avg slowest, ${e.toFixed(2)} avg fastest)`}return a.count?a.value.join(" "):a.value});return(e,o)=>(h(),m("div",Ve,[v("div",Ue,[We,v("div",je,_(s.label),1)]),v("div",ze,[v("div",{class:z(["absolute top-0 bottom-0 left-0 bg-green-700 flex items-center px-4 transition-all",{"rounded-r-full":t(n)>0}]),style:ge({right:`${t(n)}%`})},[v("p",Ye,_(t(c)),1)],6)])]))}},Xe=N(Je),Qe={class:"not-prose"},Ze={key:0,class:"mb-2"},et={key:1,class:"mb-4"},tt={key:2},at={key:3,class:"mb-2"},st={key:4},nt={key:5,class:"flex flex-col gap-4"},I=10,E=100,ot={__name:"StatsDisplay.client",setup(s){const a=se(),{stats:n}=ye(a),c=i(()=>n.value.allGames>=I+10),e=i(()=>n.value.allGames>=I+10&&n.value.allGames<E),o=i(()=>n.value.allGames>=E),l=i(()=>n.value.allGames>=0),d=i(()=>n.value.allGames>=0&&n.value.allGames<I),k=i(()=>n.value.allGames>=I);return(M,g)=>{const y=Xe;return h(),m("div",Qe,[t(c)?(h(),m("h3",Ze,"Rolling "+_(E)+" Statistics")):b("",!0),t(e)?(h(),m("div",et," Play at least "+_(E-t(n).allGames)+" more games to see your rolling "+_(E)+" statistics! These statistics are based on your "+_(E)+" most recent games only. ",1)):b("",!0),t(o)?(h(),m("div",tt," rolling stats coming soon ")):b("",!0),t(l)?(h(),m("h3",at,"Lifetime Statistics")):b("",!0),t(d)?(h(),m("div",st," Play at least "+_(I-t(n).allGames)+" more games to see statistics! ",1)):b("",!0),t(k)?(h(),m("div",nt,[u(y,{label:"GAMES",value:["You have played",t(n).allGames,"games. Wow."],count:"","lower-is-better":""},null,8,["value"]),u(y,{label:"SPEED",value:[t(n).allAverageFastestTimePerMove,t(n).allAverageTimePerMove,t(n).allAverageSlowestTimePerMove],speed:"","lower-is-better":""},null,8,["value"]),u(y,{label:"ACCURACY",value:[t(n).allBestMoveRatio],ratio:"","higher-is-better":""},null,8,["value"])])):b("",!0)])}}},lt=N(ot),ct={class:"mt-4"},it=_e("<h3>fork knight</h3><p>coming soon - find the square that forks two pieces</p><h3>defense knight</h3><p>coming soon - find a square that defends a piece</p><h3>defended knight</h3><p>coming soon - find a square that defends the knight</p><h3>dodge knight</h3><p>coming soon - get to a square while dodging all no-no squares</p><h3>predict knight</h3><p>coming soon - find a square X moves away from the knight</p>",10),ht={__name:"index",setup(s){pe({pageTitle:"horsey.gg"});const a=oe(),n=()=>{a.saveFile.reset()};return(c,e)=>{const o=Oe,l=lt;return h(),m(j,null,[u(o),v("div",ct,[u(l)]),v("p",null,[S(" Reset stats, test mode only: "),v("button",{type:"button",onClick:n},"Reset stats")]),it],64)}}};export{ht as default};
