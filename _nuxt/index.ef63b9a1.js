import{a as se,u as re,c as T}from"./achievement.4cac361a.js";import{G as S,S as A,D,j as $,H as B,k as G,o as m,b as h,e as v,t as _,h as b,u as t,P as X,r as q,a as i,l as ue,m as ne,C as de,M as fe,p as Q,q as Z,s as ee,v as K,f as u,F as z,w as me,i as W,x as le,y as E,z as w,A as he,B as ve,E as ge,I as ye,J as _e}from"./entry.8b90d9a6.js";import{_ as ke}from"./DifficultyRibbon.93123fa5.js";import{s as pe}from"./seo.acde99c7.js";const oe=s=>{switch(s){case G:return"FRICK";case B:return"HECK";case $:return"DARN";case D:return"DANG";case A:return"SHUCKS";case S:default:return"GOSH"}},be={class:"flex items-end justify-between not-prose gap-4"},Me={class:"font-bold uppercase text-xl md:text-4xl"},xe={key:0,class:"text-xs"},Se={class:"tracking-widest text-sm md:text-lg font-thin text-right"},we={__name:"TitleBlock.client",props:{difficulty:{type:Number,required:!0},title:{type:String,required:!0},description:{type:String,default:null}},setup(s){return(a,n)=>(m(),h("div",be,[v("div",null,[v("h1",Me,_(s.title),1),s.description?(m(),h("p",xe,_(s.description),1)):b("",!0)]),v("div",Se,_(t(oe)(s.difficulty))+" EDITION ",1)]))}},De=["a","b","c","d","e","f","g","h"],$e=["1","2","3","4","5","6","7","8"],j=()=>`${De[Math.floor(Math.random()*8)]}${$e[Math.floor(Math.random()*8)]}`,te=["a","b","c","d","e","f","g","h"],ae=["1","2","3","4","5","6","7","8"],Be=(s,a)=>{if(!s)return[];if(!a)return[];if(s!==X.bn&&s!==X.wn)return[];const n=te.indexOf(a[0]),c=ae.indexOf(a[1]);return[[n-2,c-1],[n-2,c+1],[n-1,c-2],[n-1,c+2],[n+1,c-2],[n+1,c+2],[n+2,c-1],[n+2,c+1]].filter(([e,l])=>{const o=e>=0&&e<=7,d=l>=0&&l<=7;return o&&d}).map(([e,l])=>`${te[e]}${ae[l]}`)};const Ge={class:"relative"},Ee=v("span",null,"Click to play",-1),Ce={__name:"ChessBoard",props:{start:{type:String,default:null},goalSquares:{type:Array,default:()=>[]},disableLegalMoves:{type:Number,default:0},showLegalMoves:{type:Boolean,default:!1}},emits:["start","move","invalidMove"],setup(s,{expose:a,emit:n}){const c=s;let e=null;const l=q(null),o=q(null),d=q(null),k=i(()=>Be(o.value,d.value)),M=i(()=>{const r=k.value.filter(ie=>!c.goalSquares.includes(ie)),f=Math.min(k.value.length-1,r.length),x=r.sort(()=>.5-Math.random()),ce=Math.min(c.disableLegalMoves,f);return x.slice(0,ce)}),g=i(()=>k.value.filter(r=>!M.value.includes(r))),y=q(!1),R=()=>{if(!e)return;o.value=["bn","wn"][Math.floor(Math.random()*2)];let r=c.start||j();for(;c.goalSquares.includes(r);)r=j();d.value=r,e.setPiece(d.value,o.value,!0)},N=()=>{e&&(e.removeMarkers(Q),c.goalSquares.forEach(r=>{e.addMarker(Q,r)}))},L=()=>{e&&(e.removeMarkers(Z),c.showLegalMoves&&g.value.forEach(r=>{e.addMarker(Z,r)}))},P=()=>{e&&(e.removeMarkers(ee),M.value.forEach(r=>{e.addMarker(ee,r)}))},O=r=>{if(!e)return;const f=r.target.getAttribute("data-square");if(!f)return;const x=e.getMarkers(K,f);(x==null?void 0:x.length)===0&&(e.removeMarkers(K),e.addMarker(K,f))},V=()=>{e&&e.removeMarkers(K)},U=r=>{if(!e)return;const f=r.target.getAttribute("data-square");if(g.value.includes(f)){const x=d.value;e.movePiece(x,f),d.value=f,L(),P(),n("move",{from:x,to:f})}else n("invalidMove",{from:d.value,to:f})},F=()=>{e&&(d.value=null,e.removeMarkers(),e.destroy(),l.value.replaceChildren())},p=()=>{e=new de(l.value,{assetsUrl:"/chess/",extensions:[{class:fe}]}),e.context.addEventListener("mousedown",U),e.context.addEventListener("mouseover",O),e.context.addEventListener("mouseleave",V)};ue(()=>{p()});const H=()=>{y.value=!0,n("start")};return a({ready:()=>{F(),p(),R(),N(),L(),P()},stop:()=>{y.value=!1,d.value=null,F(),p()}}),(r,f)=>(m(),h("div",Ge,[v("div",{ref_key:"boardEl",ref:l},null,512),t(y)?b("",!0):(m(),h("div",{key:0,class:"cursor-pointer bg-gray-300/80 absolute inset-0 flex flex-col items-center justify-center select-none gap-2",onClick:H},[Ee,ne(r.$slots,"default")]))]))}},Ae={class:"relative flex flex-col gap-1.5 overflow-clip w-8 h-full"},qe={__name:"DifficultyToggle.client",props:{difficulty:{type:Number,default:S},canGosh:{type:Boolean,default:!1},canShucks:{type:Boolean,default:!1},canDang:{type:Boolean,default:!1},canDarn:{type:Boolean,default:!1},canHeck:{type:Boolean,default:!1},canFrick:{type:Boolean,default:!1}},emits:["change"],setup(s,{emit:a}){const n=()=>{a("change",S)},c=()=>{a("change",A)},e=()=>{a("change",D)},l=()=>{a("change",$)},o=()=>{a("change",B)},d=()=>{a("change",G)};return(k,M)=>{const g=ke;return m(),h("div",Ae,[u(g,{on:s.difficulty===t(S),disabled:!s.canGosh,gosh:"",onClick:n},null,8,["on","disabled"]),u(g,{on:s.difficulty===t(A),disabled:!s.canShucks,shucks:"",onClick:c},null,8,["on","disabled"]),u(g,{on:s.difficulty===t(D),disabled:!s.canDang,dang:"",onClick:e},null,8,["on","disabled"]),u(g,{on:s.difficulty===t($),disabled:!s.canDarn,darn:"",onClick:l},null,8,["on","disabled"]),u(g,{on:s.difficulty===t(B),disabled:!s.canHeck,heck:"",onClick:o},null,8,["on","disabled"]),u(g,{on:s.difficulty===t(G),disabled:!s.canFrick,frick:"",onClick:d},null,8,["on","disabled"]),v("div",{class:W(["flex flex-col justify-end items-center grow bg-gradient-to-t ml-1 pb-1",{"from-gosh":s.difficulty===t(S),"from-shucks":s.difficulty===t(A),"from-dang":s.difficulty===t(D),"from-darn":s.difficulty===t($),"from-heck":s.difficulty===t(B),"from-frick":s.difficulty===t(G),"text-gosh":s.difficulty===t(S),"text-shucks":s.difficulty===t(A),"text-dang":s.difficulty===t(D),"text-darn":s.difficulty===t($),"text-heck":s.difficulty===t(B),"text-frick":s.difficulty===t(G)}])},[(m(!0),h(z,null,me(t(oe)(s.difficulty),(y,R)=>(m(),h("div",{key:`letter-${y}-${R}`,class:"text-sm md:text-lg lg:text-xl xl:text-2xl mix-blend-color-dodge"},_(y),1))),128))],2)])}}},Re={__name:"DifficultyDescription.client",props:{difficulty:{type:Number,required:!0},gosh:{type:Boolean,default:!1},shucks:{type:Boolean,default:!1},dang:{type:Boolean,default:!1},darn:{type:Boolean,default:!1},heck:{type:Boolean,default:!1},frick:{type:Boolean,default:!1}},setup(s){const a=s,n=i(()=>a.gosh&&a.difficulty===S),c=i(()=>a.shucks&&a.difficulty===A),e=i(()=>a.dang&&a.difficulty===D),l=i(()=>a.darn&&a.difficulty===$),o=i(()=>a.heck&&a.difficulty===B),d=i(()=>a.frick&&a.difficulty===G),k=i(()=>n.value||c.value||e.value||l.value||o.value||d.value);return(M,g)=>t(k)?(m(),h("div",{key:0,class:W(["text-xs font-bold text-gray-700 p-1 mb-1 last:mb-0",{"bg-gosh":t(n),"bg-shucks":t(c),"bg-dang":t(e),"bg-darn":t(l),"bg-heck":t(o),"bg-frick":t(d)}])},[ne(M.$slots,"default")],2)):b("",!0)}},Le=T(we),Ie=T(qe),Te=T(Re),Ne={class:"relative pr-8"},Pe={class:"absolute top-0 right-0 bottom-0"},Fe={class:"mt-1"},He=!0,Ke=!0,Oe={__name:"MoveMachine",setup(s){const a=q(null),n=q([]),c=le(),e=se(),l=re();let o;const d=i(()=>l.unlocked||l.mmAchievements.shucks10),k=i(()=>l.unlocked||l.mmAchievements.dang10),M=i(()=>l.unlocked||l.mmAchievements.darn10),g=i(()=>l.unlocked||l.mmAchievements.heck10),y=i(()=>e.currentDifficulty===S),R=i(()=>e.currentDifficulty===D?1:e.currentDifficulty===$?2:e.currentDifficulty===B?3:e.currentDifficulty===G?4:0),N=()=>{o={start:null,end:null,moves:0,invalidMoves:0,startPerformance:0,endPerformance:0,ms:0}},L=()=>{N(),a.value.stop()},P=()=>{c.saveFile.addMoveMachineStat(new ve({...o,difficulty:e.currentDifficulty,date:Date.now()})),L()},O=async()=>{N(),n.value=[j()],o.end=n.value[0],o.startPerformance=performance.now(),await he(),a.value.ready()},V=({from:p,to:H})=>{o.moves===0&&(o.start=p),o.moves+=1,n.value[0]===H&&(o.endPerformance=performance.now(),o.ms=o.endPerformance-o.startPerformance,P())},U=()=>{o.invalidMoves+=1},F=p=>{p!==e.currentDifficulty&&L(),e.setDifficulty(p)};return(p,H)=>{const Y=Le,J=Ce,r=Ie,f=Te;return m(),h(z,null,[u(Y,{difficulty:t(e).currentDifficulty,title:"Move Machine",class:"mb-4",description:"Move the horsey to the indicated square"},null,8,["difficulty"]),v("div",Ne,[u(J,{ref_key:"board",ref:a,"show-legal-moves":t(y),"disable-legal-moves":t(R),"goal-squares":t(n),class:"flex-grow border border-gray-700",onStart:O,onMove:V,onInvalidMove:U},null,8,["show-legal-moves","disable-legal-moves","goal-squares"]),v("div",Pe,[u(r,{difficulty:t(e).currentDifficulty,"can-gosh":He,"can-shucks":Ke,"can-dang":t(d),"can-darn":t(k),"can-heck":t(M),"can-frick":t(g),onChange:F},null,8,["difficulty","can-dang","can-darn","can-heck","can-frick"])])]),v("div",Fe,[u(f,{difficulty:t(e).currentDifficulty,gosh:""},{default:E(()=>[w(" Show legal moves ")]),_:1},8,["difficulty"]),u(f,{difficulty:t(e).currentDifficulty,shucks:"",dang:"",darn:"",heck:"",frick:""},{default:E(()=>[w(" Hide legal moves ")]),_:1},8,["difficulty"]),u(f,{difficulty:t(e).currentDifficulty,dang:"",darn:"",heck:"",frick:""},{default:E(()=>[w(" Disable one legal move ")]),_:1},8,["difficulty"]),u(f,{difficulty:t(e).currentDifficulty,darn:"",heck:"",frick:""},{default:E(()=>[w(" Disable one more legal move ")]),_:1},8,["difficulty"]),u(f,{difficulty:t(e).currentDifficulty,heck:"",frick:""},{default:E(()=>[w(" Disable one more legal move ")]),_:1},8,["difficulty"]),u(f,{difficulty:t(e).currentDifficulty,frick:""},{default:E(()=>[w(" Disable one more legal move ")]),_:1},8,["difficulty"])])],64)}}},Ve={class:"rounded-b-lg overflow-hidden w-full origin-bottom-left not-prose"},Ue={class:"relative px-4 bg-white"},je=v("div",{class:"absolute top-1/2 left-0 right-0 bottom-0 bg-black"},null,-1),ze={class:"stat text-3xl text-white mix-blend-difference translate-y-[10%] z-10"},We={class:"bg-green-900 h-4 w-full relative"},Ye={class:"text-white font-bold text-xs whitespace-nowrap"},Je={__name:"StatItem.client",props:{label:{type:String,required:!0},value:{type:Array,required:!0},ratio:{type:Boolean,default:!1},gameSpeed:{type:Boolean,default:!1},moveSpeed:{type:Boolean,default:!1},count:{type:Boolean,default:!1},higherIsBetter:{type:Boolean,default:!1},lowerIsBetter:{type:Boolean,default:!1}},setup(s){const a=s,n=i(()=>{if(a.ratio)return(1-a.value)*100;if(a.gameSpeed)return 0;if(a.moveSpeed){const[e,l,o]=a.value;return(l-e)/(o-e)*100}return a.count?0:50}),c=i(()=>{if(a.ratio)return`${(100*a.value[0]).toPrecision(4)}% optimal moves`;if(a.gameSpeed)return`${a.value.toFixed(2)} ms / game`;if(a.moveSpeed){const[e,l,o]=a.value;return`${l.toFixed(2)} ms / move (${o.toFixed(2)} avg slowest, ${e.toFixed(2)} avg fastest)`}return a.count?a.value.join(" "):a.value});return(e,l)=>(m(),h("div",Ve,[v("div",Ue,[je,v("div",ze,_(s.label),1)]),v("div",We,[v("div",{class:W(["absolute top-0 bottom-0 left-0 bg-green-700 flex items-center px-4 transition-all",{"rounded-r-full":t(n)>0}]),style:ge({right:`${t(n)}%`})},[v("p",Ye,_(t(c)),1)],6)])]))}},Xe=T(Je),Qe={class:"not-prose"},Ze={key:0,class:"mb-2"},et={key:1,class:"mb-4"},tt={key:2},at={key:3,class:"mb-2"},st={key:4},nt={key:5,class:"flex flex-col gap-4"},I=10,C=100,lt={__name:"StatsDisplay.client",setup(s){const a=se(),{stats:n}=ye(a),c=i(()=>n.value.allGames>=I+10),e=i(()=>n.value.allGames>=I+10&&n.value.allGames<C),l=i(()=>n.value.allGames>=C),o=i(()=>n.value.allGames>=0),d=i(()=>n.value.allGames>=0&&n.value.allGames<I),k=i(()=>n.value.allGames>=I);return(M,g)=>{const y=Xe;return m(),h("div",Qe,[t(c)?(m(),h("h3",Ze,"Rolling "+_(C)+" Statistics")):b("",!0),t(e)?(m(),h("div",et," Play at least "+_(C-t(n).allGames)+" more games to see your rolling "+_(C)+" statistics! These statistics are based on your "+_(C)+" most recent games only. ",1)):b("",!0),t(l)?(m(),h("div",tt," rolling stats coming soon ")):b("",!0),t(o)?(m(),h("h3",at,"Lifetime Statistics")):b("",!0),t(d)?(m(),h("div",st," Play at least "+_(I-t(n).allGames)+" more games to see statistics! ",1)):b("",!0),t(k)?(m(),h("div",nt,[u(y,{label:"GAMES",value:["You have played",t(n).allGames,"games. Wow."],count:"","lower-is-better":""},null,8,["value"]),u(y,{label:"MOVE SPEED",value:[t(n).allAverageFastestTimePerMove,t(n).allAverageTimePerMove,t(n).allAverageSlowestTimePerMove],"move-speed":"","lower-is-better":""},null,8,["value"]),u(y,{label:"GAME SPEED",value:t(n).allAverageTimePerGame,"game-speed":"","lower-is-better":""},null,8,["value"]),u(y,{label:"ACCURACY",value:[t(n).allBestMoveRatio],ratio:"","higher-is-better":""},null,8,["value"])])):b("",!0)])}}},ot=T(lt),ct={class:"mt-4"},it=_e("<h3>fork knight</h3><p>coming soon - find the square that forks two pieces</p><h3>defense knight</h3><p>coming soon - find a square that defends a piece</p><h3>defended knight</h3><p>coming soon - find a square that defends the knight</p><h3>dodge knight</h3><p>coming soon - get to a square while dodging all no-no squares</p><h3>predict knight</h3><p>coming soon - find a square X moves away from the knight</p>",10),mt={__name:"index",setup(s){pe({pageTitle:"horsey.gg"});const a=le(),n=()=>{a.saveFile.reset()};return(c,e)=>{const l=Oe,o=ot;return m(),h(z,null,[u(l),v("div",ct,[u(o)]),v("p",null,[w(" Reset stats, test mode only: "),v("button",{type:"button",onClick:n},"Reset stats")]),it],64)}}};export{mt as default};
