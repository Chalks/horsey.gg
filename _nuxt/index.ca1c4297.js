import{c as L}from"./client-only.2083a397.js";import{a as P,b as o,G as C,S as oe,D as z,e as j,H as W,F as Y,u as l,o as h,f as g,r as J,h as X,i as w,P as N,j as G,w as le,k as ne,l as v,C as re,M as ie,m as A,p as H,q as O,s as K,t as b,v as D,x,y as Q,z as ce,B as ue,A as B,E as de,I as fe,J as ve,K as me}from"./entry.e5c49017.js";import{s as he}from"./seo.2f37e6db.js";const ge={__name:"DifficultyDescription.client",props:{gosh:{type:Boolean,default:!1},shucks:{type:Boolean,default:!1},dang:{type:Boolean,default:!1},darn:{type:Boolean,default:!1},heck:{type:Boolean,default:!1},frick:{type:Boolean,default:!1}},setup(f){const s=f,t=P(),a=o(()=>s.gosh&&t.selectedDifficulty===C),e=o(()=>s.shucks&&t.selectedDifficulty===oe),n=o(()=>s.dang&&t.selectedDifficulty===z),u=o(()=>s.darn&&t.selectedDifficulty===j),c=o(()=>s.heck&&t.selectedDifficulty===W),m=o(()=>s.frick&&t.selectedDifficulty===Y),k=o(()=>a.value||e.value||n.value||u.value||c.value||m.value);return(i,r)=>l(k)?(h(),g("div",{key:0,class:X(["text-xs font-bold text-gray-700 p-1 mb-1 last:mb-0",{"bg-gosh":l(a),"bg-shucks":l(e),"bg-dang":l(n),"bg-darn":l(u),"bg-heck":l(c),"bg-frick":l(m)}])},[J(i.$slots,"default")],2)):w("",!0)}},_e=["a","b","c","d","e","f","g","h"],pe=["1","2","3","4","5","6","7","8"],q=()=>`${_e[Math.floor(Math.random()*8)]}${pe[Math.floor(Math.random()*8)]}`,V=["a","b","c","d","e","f","g","h"],U=["1","2","3","4","5","6","7","8"],ye=(f,s)=>{if(!f)return[];if(!s)return[];if(f!==N.bn&&f!==N.wn)return[];const t=V.indexOf(s[0]),a=U.indexOf(s[1]);return[[t-2,a-1],[t-2,a+1],[t-1,a-2],[t-1,a+2],[t+1,a-2],[t+1,a+2],[t+2,a-1],[t+2,a+1]].filter(([e,n])=>{const u=e>=0&&e<=7,c=n>=0&&n<=7;return u&&c}).map(([e,n])=>`${V[e]}${U[n]}`)};const be={class:"relative"},Me=v("span",null,"Click to play",-1),ke={__name:"ChessBoard",props:{start:{type:String,default:null},goalSquares:{type:Array,default:()=>[]},disableLegalMoves:{type:Number,default:0},showLegalMoves:{type:Boolean,default:!1}},emits:["start","move","invalidMove"],setup(f,{expose:s,emit:t}){const a=f;let e=null;const n=G(null),u=G(null),c=G(null),m=o(()=>ye(u.value,c.value)),k=o(()=>{const d=m.value.filter(ae=>!a.goalSquares.includes(ae)),y=Math.min(m.value.length-1,d.length),E=d.sort(()=>.5-Math.random()),se=Math.min(a.disableLegalMoves,y);return E.slice(0,se)}),i=o(()=>m.value.filter(d=>!k.value.includes(d))),r=G(!1),M=d=>{if(!e)return;const y=d.target.getAttribute("data-square");if(!y)return;const E=e.getMarkers(A,y);(E==null?void 0:E.length)===0&&(e.removeMarkers(A),e.addMarker(A,y))},_=()=>{e&&e.removeMarkers(A)},p=d=>{if(!e)return;const y=d.target.getAttribute("data-square");i.value.includes(y)?(e.movePiece(c.value,y),t("move",{from:c.value,to:y}),c.value=y):t("invalidMove",{from:c.value,to:y})},S=()=>{e&&(e.destroy(),n.value.replaceChildren())},T=()=>{e=new re(n.value,{assetsUrl:"/chess/",extensions:[{class:ie}]}),e.context.addEventListener("mousedown",p),e.context.addEventListener("mouseover",M),e.context.addEventListener("mouseleave",_)},Z=()=>{if(!e)return;u.value=["bn","wn"][Math.floor(Math.random()*2)];let d=a.start||q();for(;a.goalSquares.includes(d);)d=q();c.value=d,e.setPiece(c.value,u.value,!0)},ee=()=>{e&&(e.removeMarkers(H),a.goalSquares.forEach(d=>{e.addMarker(H,d)}))},I=()=>{e&&(e.removeMarkers(O),a.showLegalMoves&&i.value.forEach(d=>{e.addMarker(O,d)}))},F=()=>{e&&(e.removeMarkers(K),k.value.forEach(d=>{e.addMarker(K,d)}))};le(c,()=>{I(),F()}),ne(()=>{T()});const te=()=>{r.value=!0,t("start")};return s({ready:()=>{S(),T(),Z(),ee(),I(),F()},stop:()=>{e==null||e.removeMarkers(),S(),T(),r.value=!1}}),(d,y)=>(h(),g("div",be,[v("div",{ref_key:"boardEl",ref:n},null,512),l(r)?w("",!0):(h(),g("div",{key:0,class:"cursor-pointer bg-gray-300/80 absolute inset-0 flex flex-col items-center justify-center select-none gap-2",onClick:te},[Me,J(d.$slots,"default")]))]))}},Se=L(ge),we={__name:"BaseHorsey",setup(f){const s=G(null),t=G([]),a=P();let e;const n=o(()=>a.selectedDifficulty===C),u=o(()=>a.selectedDifficulty===z?1:a.selectedDifficulty===j?2:a.selectedDifficulty===W?3:a.selectedDifficulty===Y?4:0),c=()=>{e={start:null,end:null,moves:0,invalidMoves:0,startPerformance:0,endPerformance:0,ms:0}},m=()=>{a.saveFile.addBaseStat(new ue({...e,difficulty:a.selectedDifficulty,date:Date.now()})),c(),s.value.stop()},k=async()=>{c(),t.value=[q()],e.end=t.value[0],e.startPerformance=performance.now(),await ce(),s.value.ready()},i=({from:M,to:_})=>{e.moves===0&&(e.start=M),e.moves+=1,t.value[0]===_&&(e.endPerformance=performance.now(),e.ms=e.endPerformance-e.startPerformance,m())},r=()=>{e.invalidMoves+=1};return(M,_)=>{const p=Se,S=ke;return h(),g(Q,null,[v("div",null,[b(p,{gosh:""},{default:D(()=>[x(" Show legal moves ")]),_:1}),b(p,{shucks:"",dang:"",darn:"",heck:"",frick:""},{default:D(()=>[x(" Hide legal moves ")]),_:1}),b(p,{dang:"",darn:"",heck:"",frick:""},{default:D(()=>[x(" Disable one legal move ")]),_:1}),b(p,{darn:"",heck:"",frick:""},{default:D(()=>[x(" Disable one more legal move ")]),_:1}),b(p,{heck:"",frick:""},{default:D(()=>[x(" Disable one more legal move ")]),_:1}),b(p,{frick:""},{default:D(()=>[x(" Disable one more legal move ")]),_:1})]),b(S,{ref_key:"board",ref:s,"show-legal-moves":l(n),"disable-legal-moves":l(u),"goal-squares":l(t),class:"mt-1",onStart:k,onMove:i,onInvalidMove:r},null,8,["show-legal-moves","disable-legal-moves","goal-squares"])],64)}}},xe={class:"rounded-b-lg overflow-hidden w-full origin-bottom-left not-prose"},Be={class:"relative px-4 bg-white"},De=v("div",{class:"absolute top-1/2 left-0 right-0 bottom-0 bg-black"},null,-1),$e={class:"stat text-3xl text-white mix-blend-difference translate-y-[10%] z-10"},Ge={class:"bg-green-900 h-4 w-full relative"},Ee={class:"text-white font-bold text-xs whitespace-nowrap"},Re={__name:"StatItem.client",props:{label:{type:String,required:!0},value:{type:Array,required:!0},ratio:{type:Boolean,default:!1},speed:{type:Boolean,default:!1},count:{type:Boolean,default:!1},higherIsBetter:{type:Boolean,default:!1},lowerIsBetter:{type:Boolean,default:!1}},setup(f){const s=f,t=o(()=>{if(s.ratio)return(1-s.value)*100;if(s.speed){const[e,n,u]=s.value;return(n-e)/(u-e)*100}return s.count?0:50}),a=o(()=>{if(s.ratio)return`${(100*s.value[0]).toPrecision(4)}% optimal moves`;if(s.speed){const[e,n,u]=s.value;return`${n.toFixed(2)} ms / game (${u.toFixed(2)} avg slowest, ${e.toFixed(2)} avg fastest)`}return s.count?s.value.join(" "):s.value});return(e,n)=>(h(),g("div",xe,[v("div",Be,[De,v("div",$e,B(f.label),1)]),v("div",Ge,[v("div",{class:X(["absolute top-0 bottom-0 left-0 bg-green-700 flex items-center px-4 transition-all",{"rounded-r-full":l(t)>0}]),style:de({right:`${l(t)}%`})},[v("p",Ee,B(l(a)),1)],6)])]))}},Ae=fe("baseStatsStore",()=>{const f=P(),s=o(()=>{var i;return((i=f.saveFile)==null?void 0:i.selectedDifficulty)??C}),t=o(()=>{var r;return Object.values(((r=f.saveFile)==null?void 0:r.baseStats)??{}).filter(({difficulty:M})=>M===s.value)}),a=o(()=>t.value.length),e=o(()=>t.value.sort(({ms:i},{ms:r})=>i-r)),n=o(()=>t.value.reduce((i,{moves:r})=>i+r,0)),u=o(()=>t.value.reduce((i,{invalidMoves:r})=>i+r,0)),c=o(()=>t.value.reduce((i,{optimalMoves:r})=>i+r,0)),m=o(()=>t.value.reduce((i,{ms:r})=>i+r,0));return{baseStats:o(()=>{const i=Math.floor(e.value.length*.1),r=e.value.slice(-1*i).reduce((_,{ms:p,moves:S})=>(_.time+=p,_.moves+=S,_),{time:0,moves:0}),M=e.value.slice(0,i).reduce((_,{ms:p,moves:S})=>(_.time+=p,_.moves+=S,_),{time:0,moves:0});return{allGames:a.value,allMoves:n.value,allInvalidMoves:u.value,allOptimalMoves:c.value,allTime:m.value,allBestMoveRatio:c.value/n.value,allAverageTimePerMove:m.value/n.value,allAverageSlowestTimePerMove:r.time/r.moves,allAverageFastestTimePerMove:M.time/M.moves}}),difficulty:s}}),Pe=L(Re),Te={class:"not-prose"},qe={key:0,class:"mb-2"},Le={key:1,class:"mb-4"},Ce={key:2},Ie={key:3,class:"mb-2"},Fe={key:4},Ne={key:5,class:"flex flex-col gap-4"},R=10,$=100,He={__name:"StatsDisplay.client",setup(f){const s=Ae(),{baseStats:t}=ve(s),a=o(()=>t.value.allGames>=R+10),e=o(()=>t.value.allGames>=R+10&&t.value.allGames<$),n=o(()=>t.value.allGames>=$),u=o(()=>t.value.allGames>=0),c=o(()=>t.value.allGames>=0&&t.value.allGames<R),m=o(()=>t.value.allGames>=R);return(k,i)=>{const r=Pe;return h(),g("div",Te,[l(a)?(h(),g("h3",qe,"Rolling "+B($)+" Statistics")):w("",!0),l(e)?(h(),g("div",Le," Play at least "+B($-l(t).allGames)+" more games to see your rolling "+B($)+" statistics! These statistics are based on your "+B($)+" most recent games only. ",1)):w("",!0),l(n)?(h(),g("div",Ce," rolling stats coming soon ")):w("",!0),l(u)?(h(),g("h3",Ie,"Lifetime Statistics")):w("",!0),l(c)?(h(),g("div",Fe," Play at least "+B(R-l(t).allGames)+" more games to see statistics! ",1)):w("",!0),l(m)?(h(),g("div",Ne,[b(r,{label:"GAMES",value:["You have played",l(t).allGames,"games. Wow."],count:"","lower-is-better":""},null,8,["value"]),b(r,{label:"SPEED",value:[l(t).allAverageFastestTimePerMove,l(t).allAverageTimePerMove,l(t).allAverageSlowestTimePerMove],speed:"","lower-is-better":""},null,8,["value"]),b(r,{label:"ACCURACY",value:[l(t).allBestMoveRatio],ratio:"","higher-is-better":""},null,8,["value"])])):w("",!0)])}}},Oe=L(He),Ke=v("h1",null,"Base Horsey",-1),Ve={class:"xl:fixed xl:right-0 xl:top-0 xl:bottom-0 xl:w-full xl:max-w-side xl:overflow-auto z-50"},Ue={class:"xl:mx-4 xl:mt-[10.5rem]"},ze=me("<p>The Base Knight game trains you on the basic knight moves.</p><h3>fork knight</h3><p>coming soon - find the square that forks two pieces</p><h3>defense knight</h3><p>coming soon - find a square that defends a piece</p><h3>defended knight</h3><p>coming soon - find a square that defends the knight</p><h3>dodge knight</h3><p>coming soon - get to a square while dodging all no-no squares</p><h3>predict knight</h3><p>coming soon - find a square X moves away from the knight</p>",11),Qe={__name:"index",setup(f){he({pageTitle:"horsey.gg"});const s=P(),t=()=>{s.saveFile.resetBaseStats()};return(a,e)=>{const n=we,u=Oe;return h(),g(Q,null,[Ke,b(n),v("div",Ve,[v("div",Ue,[b(u)])]),v("p",null,[x(" Reset stats, test mode only: "),v("button",{type:"button",onClick:t},"Reset stats")]),ze],64)}}};export{Qe as default};
