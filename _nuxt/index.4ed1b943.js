import{j as C,o as h,a as m,h as f,t as y,u as a,P as z,r as G,f as l,k as le,l as Z,m as w,C as ne,M as re,p as W,q as Y,D as J,H as A,b as q,i as d,F as N,s as ce,G as H,S as ee,v as K,w as V,x as O,y as U,z as $,A as D,B as ie,E as ue,I as de,J as fe,K as he}from"./entry.f826144a.js";import{c as T}from"./client-only.626fcf22.js";import{u as me}from"./baseStats.eae379c7.js";import{s as ve}from"./seo.316ce94e.js";const ge={class:"flex items-center justify-between not-prose gap-4"},_e={class:"font-bold uppercase text-lg"},pe={class:"tracking-widest text-lg font-thin"},ke={__name:"TitleBlock",props:{title:{type:String,required:!0}},setup(r){const t=C();return(s,o)=>(h(),m("div",ge,[f("h1",_e,y(r.title),1),f("div",pe,y(a(t).difficultyName)+" EDITION ",1)]))}},ye=["a","b","c","d","e","f","g","h"],be=["1","2","3","4","5","6","7","8"],F=()=>`${ye[Math.floor(Math.random()*8)]}${be[Math.floor(Math.random()*8)]}`,X=["a","b","c","d","e","f","g","h"],Q=["1","2","3","4","5","6","7","8"],xe=(r,t)=>{if(!r)return[];if(!t)return[];if(r!==z.bn&&r!==z.wn)return[];const s=X.indexOf(t[0]),o=Q.indexOf(t[1]);return[[s-2,o-1],[s-2,o+1],[s-1,o-2],[s-1,o+2],[s+1,o-2],[s+1,o+2],[s+2,o-1],[s+2,o+1]].filter(([e,n])=>{const c=e>=0&&e<=7,i=n>=0&&n<=7;return c&&i}).map(([e,n])=>`${X[e]}${Q[n]}`)};const we={class:"relative"},Me=f("span",null,"Click to play",-1),Se={__name:"ChessBoard",props:{start:{type:String,default:null},goalSquares:{type:Array,default:()=>[]},disableLegalMoves:{type:Number,default:0},showLegalMoves:{type:Boolean,default:!1}},emits:["start","move","invalidMove"],setup(r,{expose:t,emit:s}){const o=r;let e=null;const n=G(null),c=G(null),i=G(null),_=l(()=>xe(c.value,i.value)),k=l(()=>{const u=_.value.filter(oe=>!o.goalSquares.includes(oe)),p=Math.min(_.value.length-1,u.length),x=u.sort(()=>.5-Math.random()),ae=Math.min(o.disableLegalMoves,p);return x.slice(0,ae)}),v=l(()=>_.value.filter(u=>!k.value.includes(u))),g=G(!1),M=()=>{if(!e)return;c.value=["bn","wn"][Math.floor(Math.random()*2)];let u=o.start||F();for(;o.goalSquares.includes(u);)u=F();i.value=u,e.setPiece(i.value,c.value,!0)},S=()=>{e&&(e.removeMarkers(W),o.goalSquares.forEach(u=>{e.addMarker(W,u)}))},E=()=>{e&&(e.removeMarkers(Y),o.showLegalMoves&&v.value.forEach(u=>{e.addMarker(Y,u)}))},L=()=>{e&&(e.removeMarkers(J),k.value.forEach(u=>{e.addMarker(J,u)}))},I=u=>{if(!e)return;const p=u.target.getAttribute("data-square");if(!p)return;const x=e.getMarkers(A,p);(x==null?void 0:x.length)===0&&(e.removeMarkers(A),e.addMarker(A,p))},b=()=>{e&&e.removeMarkers(A)},te=u=>{if(!e)return;const p=u.target.getAttribute("data-square");if(v.value.includes(p)){const x=i.value;e.movePiece(x,p),i.value=p,E(),L(),s("move",{from:x,to:p})}else s("invalidMove",{from:i.value,to:p})},j=()=>{e&&(i.value=null,e.removeMarkers(),e.destroy(),n.value.replaceChildren())},P=()=>{e=new ne(n.value,{assetsUrl:"/chess/",extensions:[{class:re}]}),e.context.addEventListener("mousedown",te),e.context.addEventListener("mouseover",I),e.context.addEventListener("mouseleave",b)};le(()=>{P()});const se=()=>{g.value=!0,s("start")};return t({ready:()=>{j(),P(),M(),S(),E(),L()},stop:()=>{g.value=!1,i.value=null,j(),P()}}),(u,p)=>(h(),m("div",we,[f("div",{ref_key:"boardEl",ref:n},null,512),a(g)?w("",!0):(h(),m("div",{key:0,class:"cursor-pointer bg-gray-300/80 absolute inset-0 flex flex-col items-center justify-center select-none gap-2",onClick:se},[Me,Z(u.$slots,"default")]))]))}},De=f("div",{class:"absolute border border-gray-700 bg-white w-[0.707106rem] h-[0.707106rem] top-1/2 right-0 rotate-45 translate-x-1/2 -translate-y-1/2"},null,-1),$e=[De],Be={__name:"DifficultyRibbon",props:{gosh:{type:Boolean,default:!1},shucks:{type:Boolean,default:!1},dang:{type:Boolean,default:!1},darn:{type:Boolean,default:!1},heck:{type:Boolean,default:!1},frick:{type:Boolean,default:!1}},emits:["click"],setup(r,{emit:t}){const s=r,o=C(),e=l(()=>s.gosh&&o.isGosh),n=l(()=>s.shucks&&o.isShucks),c=l(()=>s.dang&&o.isDang),i=l(()=>s.darn&&o.isDarn),_=l(()=>s.heck&&o.isHeck),k=l(()=>s.frick&&o.isFrick),v=l(()=>e.value||n.value||c.value||i.value||_.value||k.value),g=l(()=>v.value?"-translate-x-[0rem]":"-translate-x-[1rem] hover:-translate-x-[0.5rem]");return(M,S)=>(h(),m("div",{class:q(["select-none cursor-pointer transition-all",a(g)]),onClick:S[0]||(S[0]=E=>t("click"))},[f("div",{class:q(["border-y border-gray-700 inline-block relative text-center overflow-hidden w-8 h-4",{"bg-gosh":r.gosh,"bg-shucks":r.shucks,"bg-dang":r.dang,"bg-darn":r.darn,"bg-heck":r.heck,"bg-frick":r.frick}])},$e,2)],2))}},Ge={class:"relative flex flex-col gap-1 overflow-clip w-8 h-full"},Ce={__name:"DifficultyToggle.client",setup(r){const t=C(),s=()=>{t.setDifficulty(H)},o=()=>{t.setDifficulty(ee)},e=()=>{t.setDifficulty(K)},n=()=>{t.setDifficulty(V)},c=()=>{t.setDifficulty(O)},i=()=>{t.setDifficulty(U)};return(_,k)=>{const v=Be;return h(),m("div",Ge,[d(v,{gosh:"",onClick:s}),d(v,{shucks:"",onClick:o}),d(v,{dang:"",onClick:e}),d(v,{darn:"",onClick:n}),d(v,{heck:"",onClick:c}),d(v,{frick:"",onClick:i}),f("div",{class:q(["flex flex-col justify-end items-center grow bg-gradient-to-t ml-1 pb-1",{"from-gosh":a(t).isGosh,"from-shucks":a(t).isShucks,"from-dang":a(t).isDang,"from-darn":a(t).isDarn,"from-heck":a(t).isHeck,"from-frick":a(t).isFrick,"text-gosh":a(t).isGosh,"text-shucks":a(t).isShucks,"text-dang":a(t).isDang,"text-darn":a(t).isDarn,"text-heck":a(t).isHeck,"text-frick":a(t).isFrick}])},[(h(!0),m(N,null,ce(a(t).difficultyName,(g,M)=>(h(),m("div",{key:`letter-${g}-${M}`,class:"text-sm md:text-lg lg:text-xl xl:text-2xl mix-blend-color-dodge"},y(g),1))),128))],2)])}}},Ee={__name:"DifficultyDescription.client",props:{gosh:{type:Boolean,default:!1},shucks:{type:Boolean,default:!1},dang:{type:Boolean,default:!1},darn:{type:Boolean,default:!1},heck:{type:Boolean,default:!1},frick:{type:Boolean,default:!1}},setup(r){const t=r,s=C(),o=l(()=>t.gosh&&s.selectedDifficulty===H),e=l(()=>t.shucks&&s.selectedDifficulty===ee),n=l(()=>t.dang&&s.selectedDifficulty===K),c=l(()=>t.darn&&s.selectedDifficulty===V),i=l(()=>t.heck&&s.selectedDifficulty===O),_=l(()=>t.frick&&s.selectedDifficulty===U),k=l(()=>o.value||e.value||n.value||c.value||i.value||_.value);return(v,g)=>a(k)?(h(),m("div",{key:0,class:q(["text-xs font-bold text-gray-700 p-1 mb-1 last:mb-0",{"bg-gosh":a(o),"bg-shucks":a(e),"bg-dang":a(n),"bg-darn":a(c),"bg-heck":a(i),"bg-frick":a(_)}])},[Z(v.$slots,"default")],2)):w("",!0)}},Re=T(Ce),qe=T(Ee),Le={class:"relative pr-8"},Ae={class:"absolute top-0 right-0 bottom-0"},Te={class:"mt-1"},Ie={__name:"BaseHorsey",setup(r){const t=G(null),s=G([]),o=C();let e;const n=l(()=>o.selectedDifficulty===H),c=l(()=>o.selectedDifficulty===K?1:o.selectedDifficulty===V?2:o.selectedDifficulty===O?3:o.selectedDifficulty===U?4:0),i=()=>{e={start:null,end:null,moves:0,invalidMoves:0,startPerformance:0,endPerformance:0,ms:0}},_=()=>{o.saveFile.addBaseStat(new ue({...e,difficulty:o.selectedDifficulty,date:Date.now()})),i(),t.value.stop()},k=async()=>{i(),s.value=[F()],e.end=s.value[0],e.startPerformance=performance.now(),await ie(),t.value.ready()},v=({from:M,to:S})=>{e.moves===0&&(e.start=M),e.moves+=1,s.value[0]===S&&(e.endPerformance=performance.now(),e.ms=e.endPerformance-e.startPerformance,_())},g=()=>{e.invalidMoves+=1};return(M,S)=>{const E=ke,L=Se,I=Re,b=qe;return h(),m(N,null,[d(E,{title:"Move Machine",class:"mb-1"}),f("div",Le,[d(L,{ref_key:"board",ref:t,"show-legal-moves":a(n),"disable-legal-moves":a(c),"goal-squares":a(s),class:"flex-grow",onStart:k,onMove:v,onInvalidMove:g},null,8,["show-legal-moves","disable-legal-moves","goal-squares"]),f("div",Ae,[d(I)])]),f("div",Te,[d(b,{gosh:""},{default:$(()=>[D(" Show legal moves ")]),_:1}),d(b,{shucks:"",dang:"",darn:"",heck:"",frick:""},{default:$(()=>[D(" Hide legal moves ")]),_:1}),d(b,{dang:"",darn:"",heck:"",frick:""},{default:$(()=>[D(" Disable one legal move ")]),_:1}),d(b,{darn:"",heck:"",frick:""},{default:$(()=>[D(" Disable one more legal move ")]),_:1}),d(b,{heck:"",frick:""},{default:$(()=>[D(" Disable one more legal move ")]),_:1}),d(b,{frick:""},{default:$(()=>[D(" Disable one more legal move ")]),_:1})])],64)}}},Pe={class:"rounded-b-lg overflow-hidden w-full origin-bottom-left not-prose"},Fe={class:"relative px-4 bg-white"},Ne=f("div",{class:"absolute top-1/2 left-0 right-0 bottom-0 bg-black"},null,-1),He={class:"stat text-3xl text-white mix-blend-difference translate-y-[10%] z-10"},Ke={class:"bg-green-900 h-4 w-full relative"},Ve={class:"text-white font-bold text-xs whitespace-nowrap"},Oe={__name:"StatItem.client",props:{label:{type:String,required:!0},value:{type:Array,required:!0},ratio:{type:Boolean,default:!1},speed:{type:Boolean,default:!1},count:{type:Boolean,default:!1},higherIsBetter:{type:Boolean,default:!1},lowerIsBetter:{type:Boolean,default:!1}},setup(r){const t=r,s=l(()=>{if(t.ratio)return(1-t.value)*100;if(t.speed){const[e,n,c]=t.value;return(n-e)/(c-e)*100}return t.count?0:50}),o=l(()=>{if(t.ratio)return`${(100*t.value[0]).toPrecision(4)}% optimal moves`;if(t.speed){const[e,n,c]=t.value;return`${n.toFixed(2)} ms / game (${c.toFixed(2)} avg slowest, ${e.toFixed(2)} avg fastest)`}return t.count?t.value.join(" "):t.value});return(e,n)=>(h(),m("div",Pe,[f("div",Fe,[Ne,f("div",He,y(r.label),1)]),f("div",Ke,[f("div",{class:q(["absolute top-0 bottom-0 left-0 bg-green-700 flex items-center px-4 transition-all",{"rounded-r-full":a(s)>0}]),style:de({right:`${a(s)}%`})},[f("p",Ve,y(a(o)),1)],6)])]))}},Ue=T(Oe),je={class:"not-prose"},ze={key:0,class:"mb-2"},We={key:1,class:"mb-4"},Ye={key:2},Je={key:3,class:"mb-2"},Xe={key:4},Qe={key:5,class:"flex flex-col gap-4"},R=10,B=100,Ze={__name:"StatsDisplay.client",setup(r){const t=me(),{baseStats:s}=fe(t),o=l(()=>s.value.allGames>=R+10),e=l(()=>s.value.allGames>=R+10&&s.value.allGames<B),n=l(()=>s.value.allGames>=B),c=l(()=>s.value.allGames>=0),i=l(()=>s.value.allGames>=0&&s.value.allGames<R),_=l(()=>s.value.allGames>=R);return(k,v)=>{const g=Ue;return h(),m("div",je,[a(o)?(h(),m("h3",ze,"Rolling "+y(B)+" Statistics")):w("",!0),a(e)?(h(),m("div",We," Play at least "+y(B-a(s).allGames)+" more games to see your rolling "+y(B)+" statistics! These statistics are based on your "+y(B)+" most recent games only. ",1)):w("",!0),a(n)?(h(),m("div",Ye," rolling stats coming soon ")):w("",!0),a(c)?(h(),m("h3",Je,"Lifetime Statistics")):w("",!0),a(i)?(h(),m("div",Xe," Play at least "+y(R-a(s).allGames)+" more games to see statistics! ",1)):w("",!0),a(_)?(h(),m("div",Qe,[d(g,{label:"GAMES",value:["You have played",a(s).allGames,"games. Wow."],count:"","lower-is-better":""},null,8,["value"]),d(g,{label:"SPEED",value:[a(s).allAverageFastestTimePerMove,a(s).allAverageTimePerMove,a(s).allAverageSlowestTimePerMove],speed:"","lower-is-better":""},null,8,["value"]),d(g,{label:"ACCURACY",value:[a(s).allBestMoveRatio],ratio:"","higher-is-better":""},null,8,["value"])])):w("",!0)])}}},et=T(Ze),tt={class:"mt-4"},st=he("<p>The Base Knight game trains you on the basic knight moves.</p><h3>fork knight</h3><p>coming soon - find the square that forks two pieces</p><h3>defense knight</h3><p>coming soon - find a square that defends a piece</p><h3>defended knight</h3><p>coming soon - find a square that defends the knight</p><h3>dodge knight</h3><p>coming soon - get to a square while dodging all no-no squares</p><h3>predict knight</h3><p>coming soon - find a square X moves away from the knight</p>",11),it={__name:"index",setup(r){ve({pageTitle:"horsey.gg"});const t=C(),s=()=>{t.saveFile.resetBaseStats()};return(o,e)=>{const n=Ie,c=et;return h(),m(N,null,[d(n),f("div",tt,[d(c)]),f("p",null,[D(" Reset stats, test mode only: "),f("button",{type:"button",onClick:s},"Reset stats")]),st],64)}}};export{it as default};
